# =====================================================
# PRUEBAS DE API - CJ CONDUCTAS (Conductas del Adolescente)
# CON SOPORTE DE CALIFICATIVAS
# =====================================================

@baseUrl = http://localhost:3000/api
@token = TU_TOKEN_AQUI

# =====================================================
# CREAR CONDUCTA DEL ADOLESCENTE
# =====================================================

### Crear conducta CON calificativa del catálogo
POST {{baseUrl}}/cj-conductas
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "cj_id": 1,
  "conducta_id": 1,
  "calificativa_id": 2,
  "especificacion_adicional": null,
  "fecha_conducta": "2025-01-11"
}

### Crear conducta con calificativa "Otro" (requiere especificacion_adicional)
POST {{baseUrl}}/cj-conductas
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "cj_id": 1,
  "conducta_id": 5,
  "calificativa_id": 8,
  "especificacion_adicional": "Con violencia extrema en casa habitación durante la noche",
  "fecha_conducta": "2025-01-11"
}

### Crear conducta solo con especificacion_adicional (sin catálogos)
POST {{baseUrl}}/cj-conductas
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "cj_id": 1,
  "conducta_id": null,
  "calificativa_id": null,
  "especificacion_adicional": "Delitos contra la salud en su modalidad de narcomenudeo por la posesión del psicotrópico denominado metanfetamina con fines de comercio",
  "fecha_conducta": "2025-01-11"
}

# =====================================================
# CONSULTAR CONDUCTAS
# =====================================================

### Obtener conductas de una CJ
GET {{baseUrl}}/cj-conductas/cj/1
Authorization: Bearer {{token}}

### Obtener conducta por ID
GET {{baseUrl}}/cj-conductas/1
Authorization: Bearer {{token}}

# =====================================================
# ACTUALIZAR CONDUCTA
# =====================================================

### Actualizar conducta - cambiar calificativa
PUT {{baseUrl}}/cj-conductas/1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "calificativa_id": 3,
  "especificacion_adicional": "Actualizado con nuevos detalles"
}

### Actualizar conducta - cambiar a "Otro"
PUT {{baseUrl}}/cj-conductas/1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "calificativa_id": 8,
  "especificacion_adicional": "Detalles específicos del caso"
}

# =====================================================
# ELIMINAR CONDUCTA
# =====================================================

### Eliminar conducta
DELETE {{baseUrl}}/cj-conductas/10
Authorization: Bearer {{token}}

# =====================================================
# ESTADÍSTICAS
# =====================================================

### Estadísticas por calificativa
GET {{baseUrl}}/cj-conductas/stats
Authorization: Bearer {{token}}

### Conductas más frecuentes
GET {{baseUrl}}/cj-conductas/mas-frecuentes
Authorization: Bearer {{token}}

### Conductas más frecuentes (top 5)
GET {{baseUrl}}/cj-conductas/mas-frecuentes?limit=5
Authorization: Bearer {{token}}

### ⭐ NUEVO: Estadísticas por delito y calificativa
GET {{baseUrl}}/cj-conductas/stats-delito-calificativa
Authorization: Bearer {{token}}

# =====================================================
# RESPUESTAS ESPERADAS
# =====================================================

# Crear conducta con calificativa (201)
{
  "success": true,
  "data": {
    "id_conducta": 1,
    "cj_id": 1,
    "conducta_id": 1,
    "calificativa_id": 2,
    "especificacion_adicional": null,
    "fecha_conducta": "2025-01-11",
    "conducta": {
      "id": 1,
      "nombre": "Homicidio",
      "fuero_default": "Común",
      "descripcion": "Privación de la vida"
    },
    "calificativa": {
      "id": 2,
      "nombre": "Calificado"
    }
  },
  "message": "Conducta del adolescente creada exitosamente"
}

# Error: Calificativa "Otro" sin especificacion_adicional (400)
{
  "success": false,
  "error": {
    "message": "Cuando la calificativa es \"Otro\", debe proporcionar especificacion_adicional"
  }
}

# Estadísticas por delito y calificativa (200)
{
  "success": true,
  "data": [
    {
      "delito": "Homicidio",
      "calificativa": "Calificado",
      "total": 15
    },
    {
      "delito": "Robo",
      "calificativa": "Con violencia",
      "total": 12
    }
  ]
}

# =====================================================
# EQUIVALENTES EN CURL (Windows CMD)
# =====================================================

# Crear conducta con calificativa
curl -X POST "http://localhost:3000/api/cj-conductas" ^
  -H "Authorization: Bearer TOKEN" ^
  -H "Content-Type: application/json" ^
  -d "{\"cj_id\":1,\"conducta_id\":1,\"calificativa_id\":2,\"fecha_conducta\":\"2025-01-11\"}"

# Crear conducta con "Otro"
curl -X POST "http://localhost:3000/api/cj-conductas" ^
  -H "Authorization: Bearer TOKEN" ^
  -H "Content-Type: application/json" ^
  -d "{\"cj_id\":1,\"conducta_id\":5,\"calificativa_id\":8,\"especificacion_adicional\":\"Con violencia extrema\",\"fecha_conducta\":\"2025-01-11\"}"
